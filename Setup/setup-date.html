<!DOCTYPE html>
<html>

<head>
	<meta charset="utf8">
	<title>Interfaz de Frigor√≠fico</title>
	<link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
	<link rel="stylesheet" href="../index.css">
	<link rel="stylesheet" href="setup.css">
	<script src="https://kit.fontawesome.com/6b4ca2c1fd.js" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="../../electro.js"></script>
	<script src="setup.js"></script>
</head>

<body>	 

	<div class = "flex items-center justify-center w-full h-screen">
		<div class="flex  items-center text-center justify-center w-full" style="height: 80%;">
			<div class="">
				<h2 id="dateH" onclick="changeWhat(0);" class="text-4xl md:text-5xl z-50 modal-open" style="font-size: 3em;">Error fetching date </h2>
				<p  id="time" onclick="changeWhat(1);" class="flex items-center  justify-center modal-open text-5xl md:text-6xl" style="font-size: 10em;"></p>	
				<br>
				<input id="fetchOnline" onclick= "fetchOnline();" class="mr-2 leading-tight" type="checkbox" checked>
				<span class="text-sm">
					Fetch Online
				</span>
			</div>
		</div>
	</div>

	<div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-10">
		<div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
		<div class="modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50">

			<div class="modal-content py-4 text-left px-6">
				<!--Title-->
				<span id="valueModal" style="visibility: hidden;">0</span>
				<div class="flex justify-between items-center pb-3">
					<p id="dateTimeTitle" class="text-2xl font-bold">Set time</p>
					<div class="modal-close cursor-pointer z-50">
						<span title="Cerrar" class="fas fa-times fill-current text-grey hover:text-purple-300"></span>
					</div>
				</div>

				<p id="dateTime">Set current time</p>
				<div class="flex">
					<input id="timeInput" type="time" class="border-2 border-gray-300 rounded-lg p-2 w-full my-2" style="visibility: hidden;">
					<input id="dateInput" class="justify-start border-2 border-gray-300 rounded-lg p-2 w-full my-2" type="date" style="visibility: hidden;">
				</div>

				<div class="flex justify-end pt-2">
					<button title="Cancelar" class="px-4 bg-transparent p-3 rounded-lg text-gray-700 hover:bg-purple-300 hover:text-white mr-2">Cancel</button>
					<button title="Hecho" onclick="setTimeDate();" class="modal-close px-4 bg-purple-400 p-3 rounded-lg text-white hover:bg-purple-300">Accept</button>
				</div>   
			</div>
		</div>
	</div>


	<script>
		initDate();
		window.setInterval(function(){
			checkTime();
		}, 100);

		/* MENSAJE MODAL */
        var openmodal = document.querySelectorAll('.modal-open')
        for (var i = 0; i < openmodal.length; i++) {
            openmodal[i].addEventListener('click', function(event){
            event.preventDefault()
            toggleModal()
            })
        }
            
        const overlay = document.querySelector('.modal-overlay')
        overlay.addEventListener('click', toggleModal)

        var closemodal = document.querySelectorAll('.modal-close')
        for (var i = 0; i < closemodal.length; i++) {
            closemodal[i].addEventListener('click', toggleModal)
        }

        document.onkeydown = function(evt) {
            evt = evt || window.event
            var isEscape = false
            if ("key" in evt) {
            isEscape = (evt.key === "Escape" || evt.key === "Esc")
            } else {
            isEscape = (evt.keyCode === 27)
            }
            if (isEscape && document.body.classList.contains('modal-active')) {
            toggleModal()
            }
        };


        function toggleModal () {
            const body = document.querySelector('body')
            const modal = document.querySelector('.modal')
            modal.classList.toggle('opacity-0')
            modal.classList.toggle('pointer-events-none')
            body.classList.toggle('modal-active')
        }
        /*****************/
	</script>
	
</body>

</html>